<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core"
          controllerName="glw.controller.ContainerList"
          displayBlock="true">
    <Page title="{i18n>appTitle}" showNavButton="true" navButtonPress=".onNavBack"
          class="sapUiResponsiveContentPadding">
        <subHeader>
            <OverflowToolbar>
                <FacetFilter
                        id="idFacetFilter"
                        type="Simple"
                        showPopoverOKButton="true"
                        showPersonalization="true"
                        showReset="true"
                        reset="onResetFacetFilter"
                        confirm="onConfirmFacetFilter">
                    <lists>
                        <FacetFilterList
                                title="Lagerplatz"
                                key="value/storageBin"
                                growing="false"
                                mode="MultiSelect"
                                items="{path:'storageBins>/rows', templateShareable: 'false'}">
                            <items>
                                <FacetFilterItem
                                        text="{storageBins>value/id}"
                                        key="{storageBins>value/id}"/>
                            </items>
                        </FacetFilterList>

                        <FacetFilterList
                                title="Typ"
                                key="value/productCategory"
                                growing="false"
                                mode="MultiSelect"
                                items="{path:'productCategories>/rows', filters: {path: 'value/productGroup', operator: 'StartsWith', value1: 'VERP'}, templateShareable: 'false'}">
                            <items>
                                <FacetFilterItem
                                        text="{productCategories>value/name}"
                                        key="{productCategories>value/_id}"/>
                            </items>
                        </FacetFilterList>


                        <FacetFilterList
                                title="Produktgruppe"
                                key="value/productGroup"
                                growing="false"
                                mode="MultiSelect"
                                items="{path:'validValues>/productGroups', filters: {path: 'id', operator: 'StartsWith', value1: 'VERP'}, templateShareable: 'false'}">
                            <items>
                                <FacetFilterItem
                                        text="{validValues>value}"
                                        key="{validValues>value}"/>
                            </items>
                        </FacetFilterList>


                        <FacetFilterList
                                title="Leer"
                                key="value/empty"
                                growing="false"
                                mode="MultiSelect">
                            <items>
                                <FacetFilterItem
                                        text="Ja"
                                        key="yes"/>
                                <FacetFilterItem
                                        text="Nein"
                                        key="no"/>
                            </items>
                        </FacetFilterList>


                    </lists>
                </FacetFilter>
            </OverflowToolbar>
        </subHeader>
        <Table
                id="containerTable"
                mode="Delete"
                noDataText="Keine Beh채lter gefunden"
                delete="onContainerDeletePress"
                items="{path: 'container>/list', sorter: {path: 'value/volume'}}">
            <headerToolbar>
                <Toolbar>
                    <Title text="Beh채lter ({container>/total_rows})" level="H2" width="7rem"/>
                    <ToolbarSpacer/>
                    <SearchField id="searchField" liveChange=".onSearchContainer" search=".onSearchContainer"/>
                    <Button icon="sap-icon://add" tooltip="Beh채lter anlegen" press=".onOpenAddContainerDialogPress"/>
                </Toolbar>
            </headerToolbar>
            <columns>
                <Column
                        width="12em">
                    <Text text="Lagerplatz"/>
                </Column>
                <Column
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        hAlign="End">
                    <Text text="Beh채lter"/>
                </Column>

                <Column
                        minScreenWidth="Tablet"
                        demandPopin="true">
                    <Text text="Typ"/>
                </Column>

                <Column
                        minScreenWidth="Tablet"
                        demandPopin="true">
                    <Text text="Produktgruppe"/>
                </Column>

                <Column
                        minScreenWidth="Tablet"
                        demandPopin="true">
                    <Text text="Leer"/>
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <HBox alignItems="Center">
                            <Button tooltip="Lagerplatz zuordnen" icon="sap-icon://map" type="Transparent"
                                    press=".onAssignStorageBinPress"/>
                            <Text text="{container>value/storageBin}" class="sapUiSmallMarginBegin"/>
                        </HBox>
                        <Text text="{container>value/barCode}"/>
                        <Text text="{container>value/productCategoryName}"/>
                        <Text text="{container>value/productGroup}"/>
                        <core:Icon
                                src="{= ${container>value/empty} === 'yes' ? 'sap-icon://complete' : 'sap-icon://border'}"
                                color="#333333" decorative="false" tooltip="Flasche leer"/>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

    </Page>
</mvc:View>
